<header>
  <link rel="stylesheet" type="text/css" href="../profile_style.css">
  <h1 class="logo">Grouped
    <img src="grouped.png" class="logo">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        var url = document.URL;
        var n = url.indexOf("=");
        var res = parseInt(url.substring(n + 1));
        var user_data;

        $.ajax({
          type: "POST",
          contentType: "application/json",
          url: "api/user/user",
          data: JSON.stringify({ id: res }),
          dataType: "json",
          success: function (result) {
            user_data = result;
            $("#welcome-text").append("Welcome Back, " + result.firstName);
            $("#welcome-text").append("<br>What's on your mind: ");
          },
          error: function (msg) {
            console.log(msg.responseText);
          }
        });

        $("#confirm").click(function (event) {
          event.preventDefault();
          ajaxPost();
        });

        $("#test").click(function (event) {
          event.preventDefault();
          ajaxGet();
        });

        function ajaxPost() {
          var temp = {
            channelId: 0,
            userId: user_data.id,
            postText: $("#status").val(),
            createdDate: (new Date()).toString()
          }
          $.ajax({
            type: "POST",
            contentType: "application/json",
            url: "grouped/post",
            data: JSON.stringify(temp),
            dataType: 'json',
            success: function (result) {
              $("#status").html("");
              console.log("woke")
            },
            error: function (msg) {
              console.log("broke")
              console.log(msg.responseText);
            }
          });
        }

        function ajaxGet() {
          $.ajax({
            type: "GET",
            contentType: "application/json",
            url: "grouped/retrieve_posts",
            success: function (result) {
              console.log(result);
            },
            error: function (msg) {
              console.log(msg.responseText);
            }
          });
        }
      });
    </script>


  </h1>
  <input type="checkbox" id="nav-toggle" class="nav-toggle">
  <nav>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">Groups</a></li>
      <li><a href="#">Profile</a></li>
      <li><a href="#">Posts</a></li>
      <li><a href="#">Settings</a></li>
    </ul>
  </nav>
  <label for="nav-toggle" class="nav-toggle-label">
    <span></span>
  </label>
</header>

<body>
  <div class="content">
    <div id="welcome-text">
    </div>
    <input type="text" id="status" /><button id="confirm">Post</button>
    <button id="test">test</button>
  </div>
</body>